# @package _global_
defaults:
  - override /dataset: imagenet100
  - override /model: DiT


model:
  patch_size: 2
  hidden_size: 512
  depth: 12
  num_heads: 8

project_name: imagenet100_ablations
seed: 42
device: cuda


label_embedding: "rectangle"
embedding_std_scale: 1.0
use_conditioning: false


optimizer:
  lr: 1e-4
  weight_decay: 0.0
  betas: [0.9, 0.999]

rf:
  _target_: rf.RF 
  ln: false
  ln_loc: 0.0
  ln_scale: 1.0
  lambda_b: 0.5
  cls_dropout_prob: 0.1
  stochastic_interpolant_scale: 0.0


# training args
total_steps: 300000
checkpoint_every_steps: 20
eval_every_steps: 500 #60000
lr_warmup_steps: 15000
batch_size: 256
max_grad_norm: 5.0

ema_decay: 0.9999
ema_warmup_steps: 30000

compile_model: false
mixed_precision: true
grad_accum_steps: 1

eval_batch_size: 100
eval_batches: 5
eval_cfg_scale: 1.0
eval_integration_steps: 40
classifier_path: ""
